<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="styles/js-console.css" rel="stylesheet" />  
    <!--Write a function that makes a deep copy of an object
The function should work for both primitive and reference types
-->     
</head>
<body>        
    <div id="js-console">
                
    </div>        
    <script src="scripts/js-console.js"></script>
    <script>            

        Object.prototype.copy = function () {

            // Date
            if (this.constructor=== Date) {
                var copy = new Date(this.getTime());

                //copy.setDate(this.getTime());
                return copy;
            }

            // Array
            if (this.constructor === Array) {
                var copy = [];                
                for (var i = 0; i < this.length; i++) {
                    copy.push(this[i])
                }                
                return copy;
            }

            // Object
            if (this.constructor === Object) {
                var copy = {};
                for (var atr in this) {
                    copy[atr] = this[atr]
                }
                return copy;
            }

            if (this == null) {
                return this;
            }
            if (this.constructor !== Object) {
                return this;
            }

            
        }
        jsConsole.writeLine('-----Handle primitive types-----');
                
        var a = 5;
        var clonedPrimitive = a.copy();
        jsConsole.writeLine('Original primitive variable: '+clonedPrimitive);
        a = 90;
        jsConsole.writeLine('Original variable changed value: '+a);

        //clonedPrimitive still 5
        jsConsole.writeLine('clonedPrimitive: ' + clonedPrimitive);
        

        jsConsole.writeLine('-----Handle objects-----');

        var gosho = {
            name: "gosho",
            age: 20,
            hasHead:true,
            sayHello: function sh() {
                jsConsole.writeLine(this.name + ' says hello!');
            }
        }
        var clonedPerson = gosho.copy();

        //change name of the first person
        gosho.name = 'pesho';

        //clonedPerson`s name still remains
        jsConsole.writeLine(clonedPerson.name)

        jsConsole.writeLine('-----Handle arrays-----');

        var arr = [1, 2, 3, 4, 5];
        
        var clonedArr = arr.copy();

        jsConsole.write('Original Array: ');
        jsConsole.writeLine(arr.join(', '));
        jsConsole.write('Cloned Array: ');
        jsConsole.writeLine(clonedArr.join(', '));
        jsConsole.writeLine('----');

        //change first value of one array
        arr[0] = 'pesho';        
        
        //result in cloned array stays as before
        jsConsole.write('Original Array: ');
        jsConsole.writeLine(arr.join(', '));
        jsConsole.write('Cloned Array: ');
        jsConsole.writeLine(clonedArr.join(', '));

        jsConsole.writeLine('-----Handle dates-----');
        var now = new Date();
        var clonedDate = now.copy();
        
        //print their months
        jsConsole.writeLine('now.getMonth(): '+now.getMonth());
        jsConsole.writeLine('clonedDate.getMonth(): ' + clonedDate.getMonth());

        //set different month to original date
        jsConsole.writeLine('Set different month to the original Date and results are: ');
        now.setMonth(11);
        jsConsole.writeLine('now.getMonth(): ' + now.getMonth());

        //cloned date remains unchanged
        jsConsole.writeLine('clonedDate.getMonth(): ' + clonedDate.getMonth());
                       
  </script>
</body>
</html>